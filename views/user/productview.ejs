<head>
  <link rel="stylesheet" href="/user/vendor/magiczoomplus/magiczoomplus.css" />
  <script src="/user/vendor/magiczoomplus/magiczoomplus.js"></script>
  <link rel="stylesheet" type="text/css" href="/stylesheets/style.css" />
</head>
<div class="wrap-modal1 js-modal1 p-t-60 p-b-20">
  <div class="overlay-modal1 js-hide-modal1"></div>

  <div class="container">
    <div class="bg0 p-t-60 p-b-30 p-lr-15-lg how-pos3-parent">
      <button class="how-pos3 hov3 trans-04 js-hide-modal1">
        <img src="/images/icons/icon-close.png" alt="CLOSE" />
      </button>

      <div class="row">
        <div class="col-md-6 col-lg-7 p-b-30">
          <div class="p-l-25 p-r-30 p-lr-0-lg productImages">
            <div class="wrap-slick3 flex-sb flex-w">
              <div class="wrap-slick3-dots"></div>
              <div class="wrap-slick3-arrows flex-sb-m flex-w"></div>

              <div class="slick3 gallery-lb"></div>
            </div>
          </div>
        </div>

        <div class="col-md-6 col-lg-5 p-b-30">
          <div class="p-r-50 p-t-5 p-lr-0-lg">
            <h4 class="mtext-105 cl2 js-name-detail p-b-14">
              Lightweight Jacket
            </h4>
            <span class="mtext-106 cl2"> RS:</span>
            <span class="mtext-106 cl2 productOurPrice">
              RS: 58.79 <span class="productOrginalPrice">MRP:</span></span
            ><br />
            <span class="mtext-106 cl2"> MRP:</span>
            <span class="mtext-106 cl2 productOrginalPrice"> MRP:</span>
            <br />
            <span class="mtext-106 cl3"> Discount:</span>
            <span class="mtext-106 cl3 discoutPercentage"> MRP:</span>
            <span class="mtext-106 cl3">%</span>
            <p class="stext-102 cl3 p-t-23 productDescription">
              Nulla eget sem vitae eros pharetra viverra.
            </p>

            <!--  -->
            <div class="p-t-33">
              <div class="d-flex">
                <div class="sizedesc">Size:</div>
                <div class="sizeBox mx-2">S</div>
                <div class="sizeBox mx-2">M</div>
                <div class="sizeBox mx-2">L</div>
                <div class="sizeBox mx-2">XL</div>
              </div>
              <div id="productId" class="productId d-none">gfvhn</div>
              <div class="notify"></div>
              <div class="flex-w flex-r-m p-b-10">
                <div class="size-204 flex-w flex-m respon6-next">
                  <div class="wrap-num-product flex-w m-r-20 m-tb-10">
                    <div
                      class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m"
                    >
                      <i class="fs-16 zmdi zmdi-minus"></i>
                    </div>

                    <input
                      class="mtext-104 cl3 txt-center num-product"
                      type="number"
                      name="num-product"
                      id="quantitynumber"
                      value="1"
                    />

                    <div
                      class="btn-num-product-up cl8 hov-btn3 trans-04 flex-c-m"
                    >
                      <i class="fs-16 zmdi zmdi-plus"></i>
                    </div>
                  </div>

                  <button
                    class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04 add-to-cart"
                    id="add-to-cart"
                    onclick="addToCart()"
                  >
                    Add to cart
                  </button>
                </div>
              </div>
            </div>

            <!--  -->
            <div class="flex-w flex-m p-l-100 p-t-40 respon7">
              <div class="flex-m bor9 p-r-10 m-r-11">
                <a
                  href="#"
                  class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 js-addwish-detail tooltip100"
                  data-tooltip="Add to Wishlist"
                >
                  <i class="zmdi zmdi-favorite"></i>
                </a>
              </div>

              <a
                href="#"
                class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100"
                data-tooltip="Facebook"
              >
                <i class="fa fa-facebook"></i>
              </a>

              <a
                href="#"
                class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100"
                data-tooltip="Twitter"
              >
                <i class="fa fa-twitter"></i>
              </a>

              <a
                href="#"
                class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100"
                data-tooltip="Google Plus"
              >
                <i class="fa fa-google-plus"></i>
              </a>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
  let sizeBoxes = document.querySelectorAll(".sizeBox");

  sizeBoxes.forEach((sizeBox) => {
    sizeBox.addEventListener("click", () => {
      sizeBoxes.forEach((box) => {
        box.classList.remove("active");
        box.style.background = "#ffffff";
        box.style.color = "#005159";
      });
      sizeBox.classList.add("active");
      sizeBox.style.background = "#005159";
      sizeBox.style.color = "#FFFFFF";
    });
  });
</script>
<script>
  function addToCart() {
    var selectedSizeBox = document.querySelector(".sizeBox.active")
      ? document.querySelector(".sizeBox.active").textContent
      : 0;
    console.log(selectedSizeBox);
    if (selectedSizeBox == 0) {
      let message = $("<p>").text("Please select a size").css({
        color: "#ff0000",
        fontWeight: "bold",
        textAlign: "center",
        marginTop: "10px",
      });
      let productGrid = $(".notify");
      productGrid.append(message);
      setTimeout(() => {
        message.remove();
      }, 2000);
    } else {
      // Get the product ID

      var productId = document.querySelector("#productId").textContent;

      // Get the selected size

      // Get the quantity
      var quantity = document.querySelector("#quantitynumber")
        ? document.querySelector("#quantitynumber").value
        : 1;
      // Send the data to the server
      fetch("/addToCart", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          productId: productId,
          size: selectedSizeBox,
          quantity: quantity,
        }),
      })
        .then((response) => response.json())
        .then((data) => {
          if (data.success) {
            viewCart();
          } else {
            console.log("error");
          }
        })
        .catch((error) => {
          swal("Error adding product to cart: " + error);
        });
    }
  }
 function viewCart() {
  $.ajax({
    url: "/postFromCart",
    method: "POST",
    success: function (response) {
      console.log(response);
      $("#sideCart").html(response);
      var cartcount = parseInt($("#cartvalue").attr("data-notify")) + 1;
      $(".cartvalue").attr("data-notify", cartcount);
      swal("Item added to cart!", "success");
    },
    error: function (xhr, status, error) {
      console.log(error);
    },
  });
}

</script>
