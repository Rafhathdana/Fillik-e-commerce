<div class="container">
  <div class="bread-crumb flex-w p-l-25 p-r-15 p-t-30 p-lr-0-lg">
    <a href="/" class="stext-109 cl8 hov-cl1 trans-04">
      Home
      <i class="fa fa-angle-right m-l-9 m-r-10" aria-hidden="true"></i>
    </a>

    <span class="stext-109 cl4"> Shoping Cart </span>
  </div>
</div>

<!-- Shoping Cart -->
<form class="bg0 p-t-75 p-b-85">
  <div class="container">
    <div class="row">
      <div class="col-lg-10 col-xl-7 m-lr-auto m-b-50">
        <div class="m-l-25 m-r--38 m-lr-0-xl">
          <div class="wrap-table-shopping-cart">
            <table class="table-shopping-cart">
              <tr class="table_head">
                <th class="column-1">Product</th>
                <th class="column-2"></th>
                <th class="column-3">Price</th>
                <th class="column-4">Quantity</th>
                <th class="column-5">Total</th>
              </tr>
              <% if (cartList.length > 0) { var total=0;%> <%
              cartList.forEach(function(item) { %>

              <tr class="table_row">
                <td class="column-1">
                  <div class="how-itemcart1">
                    <img
                      src="/images/<%= item.product[0].images[0] %>"
                      alt="IMG"
                    />
                  </div>
                </td>
                <td class="column-2"><%= item.product[0].name %></td>
                <td class="column-3">
                  Rs<%= item.product[0].ourPrice/100 %><span class="slinecross">
                    Rs<%= item.product[0].orginalPrice %></span
                  >
                </td>
                <td class="column-4">
                  <div class="wrap-num-product flex-w m-l-auto m-r-0">
                    <div
                      class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m"
                    >
                      <i class="fs-16 zmdi zmdi-minus"></i>
                    </div>

                    <input
                      class="mtext-104 cl3 txt-center num-product"
                      type="number"
                      name="num-product1"
                      value="1"
                    />

                    <div
                      class="btn-num-product-up cl8 hov-btn3 trans-04 flex-c-m"
                    >
                      <i class="fs-16 zmdi zmdi-plus"></i>
                    </div>
                  </div>
                </td>
                <% let sum=item.product[0].ourPrice/100 * item.quantity;
                total+=sum; let tsum=item.product[0].orginalPrice
                *item.quantity; %>
                <td class="column-5">
                  Rs<%= sum %><span class="slinecross"> Rs<%= tsum %></span>
                </td>
              </tr>

              <% }) }else{ %>
              <tr class="table_row">
                <td class="column-1">Empty Cart</td>
              </tr>

              <% } %>
            </table>
          </div>

          <div class="flex-w flex-sb-m bor15 p-t-18 p-b-15 p-lr-40 p-lr-15-sm">
            <div class="flex-w flex-m m-r-20 m-tb-5">
              <input
                class="stext-104 cl2 plh4 size-117 bor13 p-lr-20 m-r-10 m-tb-5"
                type="text"
                name="coupon"
                placeholder="Coupon Code"
              />

              <div
                class="flex-c-m stext-101 cl2 size-118 bg8 bor13 hov-btn3 p-lr-15 trans-04 pointer m-tb-5"
              >
                Apply coupon
              </div>
            </div>

            <div
              class="flex-c-m stext-101 cl2 size-119 bg8 bor13 hov-btn3 p-lr-15 trans-04 pointer m-tb-10"
            >
              Update Cart
            </div>
          </div>
        </div>
      </div>

      <div class="col-sm-10 col-lg-7 col-xl-5 m-lr-auto m-b-50">
        <div
          class="bor10 p-lr-40 p-t-30 p-b-40 m-l-63 m-r-40 m-lr-0-xl p-lr-15-sm"
        >
          <h4 class="mtext-109 cl2 p-b-30">Cart Totals</h4>

          <div class="flex-w flex-t bor12 p-b-13">
            <div class="size-208">
              <span class="stext-110 cl2"> Subtotal: </span>
            </div>

            <div class="size-209">
              <span class="mtext-110 cl2"> Rs. <%= total.toFixed(2) %> </span>
            </div>
          </div>

          <div class="flex-w flex-t bor12 p-t-15 p-b-30">
            <div class="size-208 w-full-ssm">
              <span class="stext-110 cl2"> Shipping: </span>
            </div>

            <div class="size-209 p-r-18 p-r-0-sm w-full-ssm">
              <p class="stext-111 cl6 p-t-2">
                There are no shipping methods available. Please double check
                your address, or contact us if you need any help.
              < <div class="item-slick2 p-l-15 p-r-15 p-t-15 p-b-15">
                <!-- Block2 -->
                <div class="block2">
                  <div class="block2-pic hov-img0">
                    <img src="images/product-03.jpg" alt="IMG-PRODUCT" />

                    <a
                      href="#"
                      class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1"
                    >
                      Quick View
                    </a>
                  </div>

                  <div class="block2-txt flex-w flex-t p-t-14">
                    <div class="block2-txt-child1 flex-col-l">
                      <a
                        href="product-detail.html"
                        class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6"
                      >
                        Only Check Trouser
                      </a>

                      <span class="stext-105 cl3"> $25.50 </span>
                    </div>

                    <div class="block2-txt-child2 flex-r p-t-3">
                      <a
                        href="#"
                        class="btn-addwish-b2 dis-block pos-relative js-addwish-b2"
                      >
                        <img
                          class="icon-heart1 dis-block trans-04"
                          src="images/icons/icon-heart-01.png"
                          alt="ICON"
                        />
                        <img
                          class="icon-heart2 dis-block trans-04 ab-t-l"
                          src="images/icons/icon-heart-02.png"
                          alt="ICON"
                        />
                      </a>
                    </div>
                  </div>
                </div>
              </div>
              </div>
              <div class="block2-btn js-show-modal1">hgvkbjm</div>

              <div class="p-t-15">
                <span class="stext-112 cl8"> Calculate Shipping </span>

                <div class="rs1-select2 rs2-select2 bor8 bg0 m-b-12 m-t-9">
                  <select class="js-select2" name="time">
                    <option>Select a country...</option>
                    <option>USA</option>
                    <option>UK</option>
                  </select>
                  <div class="dropDownSelect2"></div>
                </div>

                <div class="bor8 bg0 m-b-12">
                  <input
                    class="stext-111 cl8 plh3 size-111 p-lr-15"
                    type="text"
                    name="state"
                    placeholder="State /  country"
                  />
                </div>

                <div class="bor8 bg0 m-b-22">
                  <input
                    class="stext-111 cl8 plh3 size-111 p-lr-15"
                    type="text"
                    name="postcode"
                    placeholder="Postcode / Zip"
                  />
                </div>

                <div class="flex-w">
                  <div
                    class="flex-c-m stext-101 cl2 size-115 bg8 bor13 hov-btn3 p-lr-15 trans-04 pointer"
                  >
                    Update Totals
                  </div>
                </div>
              </div>
            </div>
          </div>
          <div class="flex-w flex-t bor12 p-t-15 p-b-30">
            <div class="size-208 w-full-ssm">
              <span class="stext-110 cl2"> Gst: </span>
            </div>
            <%let gst= (total/100*18).toFixed(2) %>
            <div class="size-209 p-r-18 p-r-0-sm w-full-ssm">
              <p class="stext-111 cl6 p-t-2"><%= gst %></p>
            </div>
          </div>
          <div class="flex-w flex-t bor12 p-t-15 p-b-30">
            <div class="size-208 w-full-ssm">
              <span class="stext-110 cl2">Delivery: </span>
            </div>
            <%let delivery= 0 %>
            <div class="size-209 p-r-18 p-r-0-sm w-full-ssm">
              <p class="stext-111 cl6 p-t-2"><%= delivery %></p>
            </div>
          </div>
          <div class="flex-w flex-t p-t-27 p-b-33">
            <div class="size-208">
              <span class="mtext-101 cl2"> Total: </span>
            </div>
            <% let mtotal=
            parseFloat(total)+parseFloat(gst)+parseFloat(delivery) %>
            <div class="size-209 p-t-1">
              <span class="mtext-110 cl2"> <%= mtotal %></span>
            </div>
          </div>

          <button
            class="flex-c-m stext-101 cl0 size-116 bg3 bor14 hov-btn3 p-lr-15 trans-04 pointer"
          >
            Proceed to Checkout
          </button>
        </div>
      </div>
    </div>
  </div>
</form>
<%- include('productview') -%> 





<!-- Product Detail -->
<head>
  <link rel="stylesheet" href="/user/js/magiczoomplus/magiczoomplus.css" />
  <script src="/user/js/magiczoomplus/magiczoomplus.js"></script>
</head>
<section class="sec-product-detail bg0 p-t-65 p-b-60">
  <div class="container">
    <div class="row">
      <div class="col-md-6 col-lg-7 p-b-30">
        <div class="p-l-25 p-r-30 p-lr-0-lg">
          <div class="wrap-slick3 flex-sb flex-w">
            <div class="wrap-slick3-dots"></div>
            <div class="wrap-slick3-arrows flex-sb-m flex-w"></div>

            <div class="col-lg-12 d-flex justify-content-center">
              <div class="images" style="width: 75px">
                <div class="flex-colum">
                  <% for (let i = 0; i < productItem.images.length; i++) { %>
                  <img
                    class="MagicZoom productsideImg"
                    src="/images/productImages/<%=productItem.images[i]%>"
                    id="imgView"
                  />
                  <% } %>
                </div>
              </div>
              <div class="productImgWrapper" style="height: 450px">
                <a
                  href="/images/productImages/<%=productItem.images[0]%>"
                  class="MagicZoom"
                  data-options="zoomPosition: inner"
                >
                  <img
                    style="height: 450px"
                    class="productImg"
                    src="/images/productImages/<%=productItem.images[0]%>"
                    alt=""
                /></a>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-6 col-lg-5 p-b-30">
        <div class="p-r-50 p-t-5 p-lr-0-lg">
          <h4 class="mtext-105 cl2 js-name-detail p-b-14">
            <%=productItem.name%>
          </h4>

          <span class="mtext-106 cl2"> RS:</span>
          <span class="mtext-106 cl2 productOurPrice">
            <span class="productOrginalPrice">
              <%=productItem.ourPrice%></span
            ></span
          ><br />
          <span class="mtext-106 cl2"> MRP:</span>
          <span class="mtext-106 cl2 productOrginalPrice">
            <%=productItem.orginalPrice%></span
          >
          <br />
          <% let value = parseInt(productItem.orginalPrice) -
          parseInt(productItem.ourPrice); let discount = (value /
          parseInt(productItem.orginalPrice)) * 100; %>
          <span class="mtext-106 cl3"> Discount:</span>
          <span class="mtext-106 cl3 discoutPercentage">
            <%=discount.toFixed(0)%></span
          >
          <span class="mtext-106 cl3">%</span>
          <p class="stext-102 cl3 p-t-23 productDescription">
            <%=productItem.description%>
          </p>

          <!--  -->
          <div class="p-t-33">
            <div class="d-flex">
              <div class="sizedesc">Size:</div>
              <div class="sizeDBox mx-2">S</div>
              <div class="sizeDBox mx-2">M</div>
              <div class="sizeDBox mx-2">L</div>
              <div class="sizeDBox mx-2">XL</div>
            </div>
            <div id="productDId" class="productDId d-none">
              <%=productItem._id%>
            </div>
            <div class="notify"></div>
            <div class="flex-w flex-r-m p-b-10">
              <div class="size-204 flex-w flex-m respon6-next">
                <div class="wrap-num-product flex-w m-r-20 m-tb-10">
                  <div
                    class="btn-num-product-down cl8 hov-btn3 trans-04 flex-c-m"
                  >
                    <i class="fs-16 zmdi zmdi-minus"></i>
                  </div>

                  <input
                    class="mtext-104 cl3 txt-center num-product"
                    type="number"
                    id="quantityDnumber"
                    name="num-product"
                    value="1"
                  />

                  <div
                    class="btn-num-product-up cl8 hov-btn3 trans-04 flex-c-m"
                  >
                    <i class="fs-16 zmdi zmdi-plus"></i>
                  </div>
                </div>

                <button
                  class="flex-c-m stext-101 cl0 size-101 bg1 bor1 hov-btn1 p-lr-15 trans-04"
                  onclick="addToDCart()"
                >
                  Add to cart
                </button>
              </div>
            </div>
          </div>

          <!--  -->
          <div class="flex-w flex-m p-l-100 p-t-40 respon7">
            <div class="flex-m bor9 p-r-10 m-r-11">
              <a
                href="#"
                class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 js-addwish-detail tooltip100"
                data-tooltip="Add to Wishlist"
              >
                <i class="zmdi zmdi-favorite"></i>
              </a>
            </div>

            <a
              href="#"
              class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100"
              data-tooltip="Facebook"
            >
              <i class="fa fa-facebook"></i>
            </a>

            <a
              href="#"
              class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100"
              data-tooltip="Twitter"
            >
              <i class="fa fa-twitter"></i>
            </a>

            <a
              href="#"
              class="fs-14 cl3 hov-cl1 trans-04 lh-10 p-lr-5 p-tb-2 m-r-8 tooltip100"
              data-tooltip="Google Plus"
            >
              <i class="fa fa-google-plus"></i>
            </a>
          </div>
        </div>
      </div>
    </div>

    <div class="bor10 m-t-50 p-t-43 p-b-40">
      <!-- Tab01 -->
      <div class="tab01">
        <!-- Nav tabs -->
        <ul class="nav nav-tabs" role="tablist">
          <li class="nav-item p-b-10">
            <a
              class="nav-link active"
              data-toggle="tab"
              href="#MoreInfo"
              role="tab"
              >More Info</a
            >
          </li>

          <!-- <li class="nav-item p-b-10">
            <a class="nav-link" data-toggle="tab" href="#information" role="tab"
              >Additional information</a
            >
          </li> -->

          <li class="nav-item p-b-10">
            <a class="nav-link" data-toggle="tab" href="#reviews" role="tab"
              >Reviews (1)</a
            >
          </li>
        </ul>

        <!-- Tab panes -->
        <div class="tab-content p-t-43">
          <!-- - -->
          <div class="tab-pane fade show active" id="MoreInfo" role="tabpanel">
            <div class="how-pos2 p-lr-15-md">
              <p class="stext-102 cl6"><%=productItem.moreinfo%></p>
            </div>
          </div>

          <!-- - -->
          <!-- <div class="tab-pane fade" id="information" role="tabpanel">
            <div class="row">
              <div class="col-sm-10 col-md-8 col-lg-6 m-lr-auto">
                <ul class="p-lr-28 p-lr-15-sm">
                  <li class="flex-w flex-t p-b-7">
                    <span class="stext-102 cl3 size-205"> Weight </span>

                    <span class="stext-102 cl6 size-206"> 0.79 kg </span>
                  </li>

                  <li class="flex-w flex-t p-b-7">
                    <span class="stext-102 cl3 size-205"> Dimensions </span>

                    <span class="stext-102 cl6 size-206">
                      110 x 33 x 100 cm
                    </span>
                  </li>

                  <li class="flex-w flex-t p-b-7">
                    <span class="stext-102 cl3 size-205"> Materials </span>

                    <span class="stext-102 cl6 size-206"> 60% cotton </span>
                  </li>

                  <li class="flex-w flex-t p-b-7">
                    <span class="stext-102 cl3 size-205"> Color </span>

                    <span class="stext-102 cl6 size-206">
                      Black, Blue, Grey, Green, Red, White
                    </span>
                  </li>

                  <li class="flex-w flex-t p-b-7">
                    <span class="stext-102 cl3 size-205"> Size </span>

                    <span class="stext-102 cl6 size-206"> XL, L, M, S </span>
                  </li>
                </ul>
              </div>
            </div>
          </div> -->

          <!-- - -->
          <div class="tab-pane fade" id="reviews" role="tabpanel">
            <div class="row">
              <div class="col-sm-10 col-md-8 col-lg-6 m-lr-auto">
                <div class="p-b-30 m-lr-15-sm">
                  <!-- Review -->
                  <div class="flex-w flex-t p-b-68">
                    <div
                      class="wrap-pic-s size-109 bor0 of-hidden m-r-18 m-t-6"
                    >
                      <img src="images/avatar-01.jpg" alt="AVATAR" />
                    </div>

                    <div class="size-207">
                      <div class="flex-w flex-sb-m p-b-17">
                        <span class="mtext-107 cl2 p-r-20">
                          Ariana Grande
                        </span>

                        <span class="fs-18 cl11">
                          <i class="zmdi zmdi-star"></i>
                          <i class="zmdi zmdi-star"></i>
                          <i class="zmdi zmdi-star"></i>
                          <i class="zmdi zmdi-star"></i>
                          <i class="zmdi zmdi-star-half"></i>
                        </span>
                      </div>

                      <p class="stext-102 cl6">
                        Quod autem in homine praestantissimum atque optimum est,
                        id deseruit. Apud ceteros autem philosophos
                      </p>
                    </div>
                  </div>

                  <!-- Add review -->
                  <form class="w-full">
                    <h5 class="mtext-108 cl2 p-b-7">Add a review</h5>

                    <p class="stext-102 cl6">
                      Your email address will not be published. Required fields
                      are marked *
                    </p>

                    <div class="flex-w flex-m p-t-50 p-b-23">
                      <span class="stext-102 cl3 m-r-16"> Your Rating </span>

                      <span class="wrap-rating fs-18 cl11 pointer">
                        <i
                          class="item-rating pointer zmdi zmdi-star-outline"
                        ></i>
                        <i
                          class="item-rating pointer zmdi zmdi-star-outline"
                        ></i>
                        <i
                          class="item-rating pointer zmdi zmdi-star-outline"
                        ></i>
                        <i
                          class="item-rating pointer zmdi zmdi-star-outline"
                        ></i>
                        <i
                          class="item-rating pointer zmdi zmdi-star-outline"
                        ></i>
                        <input class="dis-none" type="number" name="rating" />
                      </span>
                    </div>

                    <div class="row p-b-25">
                      <div class="col-12 p-b-5">
                        <label class="stext-102 cl3" for="review"
                          >Your review</label
                        >
                        <textarea
                          class="size-110 bor8 stext-102 cl2 p-lr-20 p-tb-10"
                          id="review"
                          name="review"
                        ></textarea>
                      </div>

                      <div class="col-sm-6 p-b-5">
                        <label class="stext-102 cl3" for="name">Name</label>
                        <input
                          class="size-111 bor8 stext-102 cl2 p-lr-20"
                          id="name"
                          type="text"
                          name="name"
                        />
                      </div>

                      <div class="col-sm-6 p-b-5">
                        <label class="stext-102 cl3" for="email">Email</label>
                        <input
                          class="size-111 bor8 stext-102 cl2 p-lr-20"
                          id="email"
                          type="text"
                          name="email"
                        />
                      </div>
                    </div>

                    <button
                      class="flex-c-m stext-101 cl0 size-112 bg7 bor11 hov-btn3 p-lr-15 trans-04 m-b-10"
                    >
                      Submit
                    </button>
                  </form>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="bg6 flex-c-m flex-w size-302 m-t-73 p-tb-15">
    <span class="stext-107 cl6 p-lr-25"> SKU: JAK-01 </span>

    <span class="stext-107 cl6 p-lr-25"> Categories: Jacket, Men </span>
  </div>
</section>

<!-- Related Products -->
<section class="sec-relate-product bg0 p-t-45 p-b-105">
  <div class="container">
    <div class="p-b-45">
      <h3 class="ltext-106 cl5 txt-center">Related Products</h3>
    </div>

    <!-- Slide2 -->
    <div class="wrap-slick2">
      <div class="slick2">
        <% for (let i = locals.startIndex; i < locals.endIndex; i++) { %>
        <div class="item-slick2 p-l-15 p-r-15 p-t-15 p-b-15">
          <!-- Block2 -->
          <div class="block2">
            <div class="block2-pic hov-img0">
              <img
                src="/images/productImages/<%=productsList[i].images[0]%>"
                alt="IMG-PRODUCT"
              />
              <% let productData=productsList[i] %>
              <a
                href="#"
                class="block2-btn flex-c-m stext-103 cl2 size-102 bg0 bor2 hov-btn1 p-lr-15 trans-04 js-show-modal1"
                data-product-data="<%=JSON.stringify(productData)%>"
              >
                Quick View
              </a>
            </div>

            <div class="block2-txt flex-w flex-t p-t-14">
              <div class="block2-txt-child1 flex-col-l">
                <a
                  href="product-detail.html"
                  class="stext-104 cl4 hov-cl1 trans-04 js-name-b2 p-b-6"
                >
                  <%= locals.productsList[i].name %>
                </a>

                <
                <span class="stext-105 cl3">
                  RS.<%=((productsList[i].ourPrice)/100)%>
                  <span>Rs<%= productsList[i].orginalPrice %></span></span
                >
              </div>

              <div class="block2-txt-child2 flex-r p-t-3">
                <a
                  href="#"
                  class="btn-addwish-b2 dis-block pos-relative js-addwish-b2"
                >
                  <img
                    class="icon-heart1 dis-block trans-04"
                    src="images/icons/icon-heart-01.png"
                    alt="ICON"
                  />
                  <img
                    class="icon-heart2 dis-block trans-04 ab-t-l"
                    src="images/icons/icon-heart-02.png"
                    alt="ICON"
                  />
                </a>
              </div>
            </div>
          </div>
        </div>
        <% } %>
      </div>
    </div>
  </div>
</section>

<script>
  // Selecting Size
  let sizeDBoxes = document.querySelectorAll(".sizeDBox");

  sizeDBoxes.forEach((sizeDBox) => {
    sizeDBox.addEventListener("click", () => {
      sizeDBoxes.forEach((box) => {
        box.classList.remove("active");
        box.style.background = "#ffffff";
        box.style.color = "#005159";
      });
      sizeDBox.classList.add("active");
      sizeDBox.style.background = "#005159";
      sizeDBox.style.color = "#FFFFFF";
    });
  });

  // Increasing Quantity Number
</script>
<script>
  const smallImages = document.querySelectorAll(".flex-colum img");
  const largeImage = document.querySelector(".productImgWrapper img");
  const largeA = document.querySelector(".productImgWrapper a");
  const overlay = document.createElement("div");
  overlay.classList.add("overlay");
  largeImage.parentElement.appendChild(overlay);

  smallImages.forEach((img, index) => {
    img.addEventListener("mouseover", () => {
      const imgSrc = img.getAttribute("src");
      // Stop the current MagicZoom figure
      MagicZoom.stop(largeA);
      // Set the new image source and href
      largeImage.setAttribute("src", imgSrc);
      largeA.setAttribute("href", imgSrc);
      // Reset the MagicZoom figure
      largeA.classList.remove("MagicZoom");
      largeA.classList.add("MagicZoom");
      // Start the new MagicZoom figure
      MagicZoom.start(largeA);
    });
  });
</script>
<script>
  function addToDCart() {
    var selectedSizeDBox = document.querySelector(".sizeDBox.active")
      ? document.querySelector(".sizeDBox.active").textContent
      : 0;
    console.log(selectedSizeDBox);
    if (selectedSizeDBox == 0) {
      let message = $("<p>").text("Please select a size").css({
        color: "#ff0000",
        fontWeight: "bold",
        textAlign: "center",
        marginTop: "10px",
      });
      let productGrid = $(".notify");
      productGrid.append(message);
      setTimeout(() => {
        message.remove();
      }, 2000);
    } else {
      // Get the product ID

      var productId = document.querySelector("#productDId").textContent;

      // Get the selected size

      // Get the quantity
      var quantity = document.querySelector("#quantityDnumber")
        ? document.querySelector("#quantityDnumber").value
        : 1;
      console.log(productId);
      console.log(selectedSizeDBox);
      console.log(quantity);
      // Send the data to the server
      fetch("/addToCart", {
        method: "POST",
        headers: {
          "Content-Type": "application/json",
        },
        body: JSON.stringify({
          productId: productId,
          size: selectedSizeDBox,
          quantity: quantity,
        }),
      })
        .then((response) => response.json())
        .then((data) => {
          if (data.success) {
            viewCart();
          } else {
            console.log("error");
          }
        })
        .catch((error) => {
          alert("Error adding product to cart: " + error);
        });
    }
  }
  function viewCart() {
    fetch("/postFromCart", {
      method: "post",
      headers: {
        "Content-Type": "application/json",
      },
    })
      .then((response) => response.json())
      .then((data) => {
        if (data.success) {
          var cartList = addCarted(data.items);
          var cartcount = data.items.length;
          var notifyEl = $("#cartvalue");

          console.log(cartcount);
          $("#cartItemsList").replaceWith(cartList);
          notifyEl.attr("data-notify", cartcount);
          swal("Item  added to cart !", "success");
        }
      })
      .catch((error) => {
        alert("Error adding product to cart: " + error);
      });
  }
  function addCarted(cartItems) {
    var cartList = $("<ul>")
      .addClass("header-cart-wrapitem w-full")
      .attr("id", "cartItemsList");

    for (let i = 0; i < cartItems.length; i++) {
      var cartItem = $("<li>")
        .addClass("header-cart-item flex flex-t mb-2")
        .appendTo(cartList);

      var itemImg = $("<div>")
        .addClass("header-cart-item-img")
        .appendTo(cartItem);

      $("<img>")
        .attr("src", "/images/productImages/" + cartItems[i].images[0])
        .attr("alt", "IMG")
        .appendTo(itemImg);

      var itemTxt = $("<div>")
        .addClass("header-cart-item-txt p-t-8")
        .appendTo(cartItem);

      $("<a>")
        .attr("href", "#")
        .addClass("header-cart-item-name m-b-18 hov-cl1 trans-04")
        .text(cartItems[i].name)
        .appendTo(itemTxt);

      $("<span>")
        .addClass("header-cart-item-info")
        .text("size: " + cartItems[i].size)
        .appendTo(itemTxt);

      $("<span>")
        .addClass("header-cart-item-info")
        .text(cartItems[i].quantity + " x RS." + cartItems[i].ourPrice)
        .appendTo(itemTxt);

      $("<span>")
        .addClass("slinecross")
        .text(cartItems[i].quantity + " x Rs" + cartItems[i].originalPrice)
        .appendTo(itemTxt);
    }

    return cartList;
  }
</script>
<%- include('productview') -%> <%- include('sidecart') -%>
